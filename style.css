* { box-sizing:border-box; font-family:system-ui; margin:0; padding:0; }
body{background:#f5f7fb; color:#111; min-height:100vh; display:flex; flex-direction:column;}
header{padding:16px; display:flex; align-items:center; justify-content:space-between; background:#3b82f6; color:white; position:sticky; top:0; z-index:100; flex-wrap:wrap;}
#badge{background:red; border-radius:50%; padding:4px 8px; font-size:12px; min-width:20px; text-align:center;}
#addColumnBtn{padding:4px 8px; border:none; border-radius:6px; background:#2563eb; color:white; cursor:pointer; margin-top:4px;}
.add, .filters{display:flex; gap:8px; padding:12px; background:white; flex-wrap:wrap;}
.add input, .add select, .add button, .filters select{padding:8px; border-radius:8px; border:1px solid #ccc; transition:0.2s;}
.add input:focus, .add select:focus{border-color:#3b82f6; outline:none;}
.add button{border:none; background:#3b82f6; color:white; cursor:pointer;}
.add button:hover{background:#2563eb;}
.filters select{flex:1 1 120px;}
.board{display:grid; grid-template-columns:repeat(auto-fill,minmax(250px,1fr)); gap:12px; padding:12px;}
.column{background:white; border-radius:12px; padding:8px; display:flex; flex-direction:column; min-height:200px; position:relative;}
.column h2{margin-top:0; cursor:pointer; display:flex; justify-content:space-between; align-items:center;}
.column .delete-column{background:red; color:white; border:none; border-radius:6px; padding:2px 6px; cursor:pointer; font-size:12px;}
.list{flex:1; display:flex; flex-direction:column; gap:8px;}
.task{background:#eef2ff; padding:8px; border-radius:8px; cursor:grab; animation:fade .2s ease; position:relative; touch-action: manipulation;}
.task.dragging{opacity:0.6; transform:scale(1.05);}
.task.high{border-left:4px solid red;}
.task small{display:block; opacity:.6;}
.delete-btn{position:absolute; top:4px; right:4px; padding:2px 6px; font-size:12px; background:red; color:white; border:none; border-radius:6px; cursor:pointer;}
.delete-btn:hover{background:#b91c1c;}
.modal{display:none; position:fixed; z-index:200; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.5); justify-content:center; align-items:center;}
.modal-content{background:white; padding:16px; border-radius:12px; width:90%; max-width:500px; display:flex; flex-direction:column; gap:8px;}
.modal-content textarea{width:100%; padding:8px;}
.close{align-self:flex-end; cursor:pointer; font-size:20px;}
.accordion{cursor:pointer;}
.accordion-content{max-height:0; overflow:hidden; transition:max-height .2s ease;}
.accordion.active + .accordion-content{max-height:500px;}
@keyframes fade{from{opacity:0; transform:scale(.95);} to{opacity:1; transform:scale(1);}}
@media(max-width:600px){
  .add, .filters{flex-direction:column; gap:4px;}
  header{flex-direction:column; gap:4px;}
}
